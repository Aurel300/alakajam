{% extends "event/_page-event.html" %}
{% import "event/_macros-event.html" as eventMacros %}

{% block body %}
{{ super() }}

<div class="container">
  <div class="row">
    <h1>Ratings <span class="count">({{ ratingCount }})</span></h1>
    <ul class="nav nav-tabs">
      {% for rankedVoteHistory in rankedVoteHistories %}
        <li id="js-tab-container-{{ rankedVoteHistory.title }}" role="presentation" class="js-tab-container {{ 'active' if loop.index === 1 }}">
          <a class="js-tab-button" data-tab-selector="#js-tab-{{ rankedVoteHistory.title }}" href="#">
            <h2 style="margin-bottom: 0">{{ rankedVoteHistory.title }}</h2>
          </a>
        </li>
      {% endfor %}
    </ul>
    {% for rankedVoteHistory in rankedVoteHistories %}
      {% set categoryIndex = loop.index %}
      <div id="js-tab-{{ rankedVoteHistory.title }}" class="js-tab" style="background-color: white; padding: 10px; {{ 'display: none' if categoryIndex > 1 }}">
        <div class="row" style="margin-top: 10px">
          <div class="col-sm-6">
            <div class="row">
              <div class="col-xs-10 col-xs-offset-2"><h3>Solo entries <span class="count">({{ rankedVoteHistory.votesSolo.length }})</span></h3></div>
            </div>
            <div class="row">
            {% for vote in rankedVoteHistory.votesSolo %}
              <div class="col-xs-2">
                <h4 class="pull-right">{{ vote.get('vote_' + categoryIndex) }}</h4>
              </div>
              <div class="col-xs-10" style="margin-bottom: 5px">
                {{ eventMacros.entrySmallThumb(vote.related('entry'), { noShadow: true }) }}
              </div>
            {% endfor %}
            </div>
          </div>
          <div class="col-sm-6">
            <div class="row">
              <div class="col-xs-10 col-xs-offset-2"><h3>Team entries <span class="count">({{ rankedVoteHistory.votesTeam.length }})</span></h3></div>
            </div>
            <div class="row">
            {% for vote in rankedVoteHistory.votesTeam %}
              <div class="col-xs-2">
                <h4 class="pull-right">{{ vote.get('vote_' + categoryIndex) }}</h4>
              </div>
              <div class="col-xs-10" style="margin-bottom: 5px">
                {{ eventMacros.entrySmallThumb(vote.related('entry'), { noShadow: true }) }}
              </div>
            {% endfor %}
            </div>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
</div>

{% endblock %}

{% block scripts %}
<script type="text/javascript">
  alakajam.common.tabs.init({
    buttonContainerSelector: '.js-tab-container',
    buttonSelector: '.js-tab-button',
    tabSelector: '.js-tab'
  });
</script>
{% endblock %}
