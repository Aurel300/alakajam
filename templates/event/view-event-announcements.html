{% extends "event/_page-event.html" %}
{% import "post/_macros-post.html" as postMacros %}
{% import "_macros-form.html" as formMacros %}

{% block body %}

{% set eventBanner = featuredEvent.related('details').get('banner') if featuredEvent %}
{% if eventBanner %}
<div class="event-banner" style="background-image: url('{{ eventBanner }}')">
  <div class="event-banner__gradient"></div>
</div>
{% endif %}

<div class="container">
  <div class="row">
    <div class="col-lg-offset-1 col-xs-10" style="margin-bottom: 20px">
      {{ eventMacros.eventJumbo(event, user, userEntry) }}
    </div>
  </div>
  <div class="row">
    <div class="col-lg-offset-1 col-lg-10 {{ 'event-banner-panel' if eventBanner }}" style=" {{ 'padding-top: 10px' if eventBanner }}">
      {% for post in posts.models %}
        {{ postMacros.post(post, user) }}
      {% endfor %}

      {% if posts.models.length > 0 %}
        {{ formMacros.pagination(1, posts.pagination.pageCount, '/posts?special_post_type=announcement&event_id=' + event.get('id')) }}
      {% else %}
      <div class="well">
        No announcements yet.
      </div>
      {% endif %}
    </div>
  </div>
</div>

{% endblock %}
