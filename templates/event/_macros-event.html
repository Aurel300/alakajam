{% macro entryThumb(entry, cols = 3) %}
<div class="col-sm-4 col-md-{{ cols }}">
  <div class="entry-thumb">
    {% set picturePath = entry.get('pictures')[0] if entry.get('pictures').length > 0 else '/static/images/default-entry.png' %}
    <a href="{{ buildUrl(entry, 'entry') }}">
      <div class="entry-thumb__picture" style="background-image: url('{{ picturePath }}')">
        <div class="entry-thumb__picture-gradient"></div>
      </div>
      <div class="entry-thumb__title">{{ entry.get('title') }}</div>
    </a>
    <div class="entry-thumb__author" >by 
    {% for userRole in entry.related('userRoles').models %}
     <a href="{{ buildUrl(userRole, 'user') }}">
      {{ userRole.get('user_title') }}{{ ', ' if not loop.last }}
     </a>
    {% endfor %}
    </div>
  </div>
</div>
{% endmacro %}

{% macro entrySmallThumb(entry, cols = 4) %}
<div class="col-xs-6 col-md-{{ cols }}">
  <div class="entry-small-thumb">
    {% set picturePath = entry.get('pictures')[0] if entry.get('pictures').length > 0 else '/static/images/default-entry.png' %}
    <div class="entry-small-thumb__details">
      <a href="{{ buildUrl(entry, 'entry') }}">
        <div class="entry-small-thumb__picture" style="background-image: url('{{ picturePath }}')"></div>
        <div class="entry-small-thumb__title"  href="{{ buildUrl(entry, 'entry') }}">
          {{ entry.get('title') }}
        </div>
      </a>
      <div class="entry-small-thumb__author" >by 
      {% for userRole in entry.related('userRoles').models %}
       <a href="{{ buildUrl(userRole, 'user') }}">
        {{ userRole.get('user_title') }}{{ ', ' if not loop.last }}
       </a>
      {% endfor %}
      </div>
    </div>
  </div>
</div>
{% endmacro %}

{% macro eventTable(event, withEntries = true, entryCols = 4) %}
  <div class="event-table {{ 'live' if event.get('status') == 'open' }}">
    <div class="row">
      <div class="col-md-12">
        <a class="event-table__header" href="{{ buildUrl(event, 'event') }}">
          <div class="row">
            <div class="col-sm-6">
              <h2>
                {% if event.get('status') === 'pending' %}
                  <span class="label label-default event-table__status">Upcoming</span>
                {% elseif event.get('status') === 'open' %}
                  <span class="label label-danger event-table__status">Live!</span>
                {% endif %}
                {{ event.get('title') }}
              </h2>
            </div>
            <div class="col-sm-6 text-right event-table__theme">
              {{ event.get('display_theme') }}
            </div>
          </div>
        </a>
        <div class="event-table__details">
          <div class="row">
            <div class="col-sm-6">
              <div class="event-table__detail">
                <span class="glyphicon glyphicon-calendar"></span> {{ event.get('display_dates') }}
              </div>
            </div>
            {% if event.related('entries').length > 0 %}
            <div class="col-sm-6 text-right">
              <div class="event-table__detail">
                <a href="{{ buildUrl(event, 'event', 'games') }}">
                  <span class="glyphicon glyphicon-tower"></span>
                  {{ event.related('entries').length }} game{{ 's' if event.related('entries').length > 1 }}
                </a>
              </div>
            </div>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
    {% if withEntries %}
    <div class="row">
      {% for entry in event.related('entries').models %}
        {{ entrySmallThumb(entry, entryCols) }}
      {% endfor %}
    </div>
    {% endif %}
  </div>
{% endmacro %}
