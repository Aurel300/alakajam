{% extends "_page.html" %}
{% import "event/_macros-event.html" as eventMacros %}
{% import "post/_macros-post.html" as postMacros %}

{% block moderation %}
  {% if liveEvent %}<a href="{{ buildUrl(liveEvent, 'event', 'edit') }}" class="btn"><span class="glyphicon glyphicon-pencil"></span> Edit current event</a>{% endif %}
  {% if nextEvent %}<a href="{{ buildUrl(nextEvent, 'event', 'edit') }}" class="btn"><span class="glyphicon glyphicon-pencil"></span> Edit next event</a>{% endif %}
{% endblock %}

{% block body %}

<div class="container">
  <div class="row">
    <div class="col-md-6">
      <h1>Announcements</h1>
      {% for post in posts.models  %}
        {{ postMacros.post(post, user, {hideSpecialLabels: true}) }}
      {% endfor %}
      {% if publishedPosts.length === 0 %}
        <div class="well">Nothing yet!</div>
      {% endif %}
    </div>
    <div class="col-md-6">
      {% if (liveEvent) %}
      <h1>Current event</h1>
      {{ eventMacros.eventTable(liveEvent, true, 6) }}
      {% else %}
      <h1>Next event</h1>
      {% if (nextEvent) %}
      {{ eventMacros.eventTable(nextEvent, true, 6) }}
      {% else %}
      <div class="well">No upcoming event.</div>
      {% endif %}
      {% endif %}
    </div>
  </div>
</div>

{% endblock %}