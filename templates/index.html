{% extends "_page.html" %}
{% import "event/_macros-event.html" as eventMacros %}
{% import "post/_macros-post.html" as postMacros %}

{% block moderation %}
  {% if liveEvent %}<a href="{{ buildUrl(liveEvent, 'event', 'edit') }}" class="btn"><span class="glyphicon glyphicon-pencil"></span> Edit current event</a>{% endif %}
  {% if nextEvent %}<a href="{{ buildUrl(nextEvent, 'event', 'edit') }}" class="btn"><span class="glyphicon glyphicon-pencil"></span> Edit next event</a>{% endif %}
{% endblock %}

{% block body %}

<div class="home-bar">
  <div class="home-brand">
    <img class="home-brand__logo" src="/static/images/logo.svg" />
    <span class="home-brand__name">WeJam!</span>
  </div>
</div>

<div class="container">
  <div class="row">
    <div class="col-md-6 home-announcement">
      {% if announcement %}
        {{ postMacros.post(announcement, user) }}
        <a href="/announcements" class="btn btn-sm btn-default">Browse announcements <span class="glyphicon glyphicon-chevron-right"></span></a>
      {% else %}
        <div class="well">No announcements yet!</div>
      {% endif %}
    </div>
    <div class="col-md-6">
      {% if (liveEvent) %}
        {{ eventMacros.eventTable(liveEvent, false, 6) }}
      {% endif %}
      {% if (nextEvents or not liveEvent) %}
        {% for nextEvent in nextEvents %}
          {{ eventMacros.eventTable(nextEvent, false, 6) }}
        {% endfor %}
        {% if nextEvents.length === 0 %}
          <div class="well">No upcoming event.</div>
        {% endif %}
      {% endif %}
      <a href="/events" class="btn btn-sm btn-default">Browse events <span class="glyphicon glyphicon-chevron-right"></span></a>
    </div>
  </div>
</div>

{% endblock %}